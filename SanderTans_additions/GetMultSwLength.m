
% Getting data out of certain schnitz. The schnitz that contain switching
% have to be mention LAST. values are being stored in workspace as file
% AllData, with every collum comatin specified data as mention below.

Fdata = {...
    'Pos06-mini-01','2006-07-20','e.coli','rootDir','F:\CELLOBSERVER\2006mondate\',[5 20];...
    %'Pos04-mini-01','2006-08-08','e.coli','rootDir','F:\CELLOBSERVER\2006mondate\',[2 3];...
    %'Pos01-mini-01','2006-08-10','e.coli','rootDir','D:\CellObserver',[4 5];...
    %'Pos01e2-mini-01','2006-08-10','e.coli','rootDir','D:\CellObserver',[8 9];...
    %'Pos01e3-mini-01','2006-08-10','e.coli','rootDir','D:\CellObserver',[8 9];...
    %'Pos02-mini-01','2006-08-10','e.coli','rootDir','D:\CellObserver',[9 8];...
    %'Pos02e2-mini-01','2006-08-10','e.coli','rootDir','D:\CellObserver',[9];...
    %'Pos02e3-mini-01','2006-08-10','e.coli','rootDir','D:\CellObserver',[4 8];...
    %'Pos04-mini-01','2006-08-10','e.coli','rootDir','D:\CellObserver',[7 6];...
    %'Pos05-mini-01','2006-08-10','e.coli','rootDir','D:\CellObserver',[7 6];...
    %'Pos06-mini-01','2006-08-10','e.coli','rootDir','D:\CellObserver',[2 3];...
    %'Pos06e2-mini-01','2006-08-10','e.coli','rootDir','D:\CellObserver',[36 4];...
    %'Pos02-mini-01','2006-08-17','e.coli','rootDir','F:\CELLOBSERVER\2006mondate\',[7 4];...
    %'Pos02e2-mini-01','2006-08-17','e.coli','rootDir','F:\CELLOBSERVER\2006mondate\',[4 5];...
    %'Pos03-mini-01','2006-08-17','e.coli','rootDir','F:\CELLOBSERVER\2006mondate\',[1];...
    %above: movie is not early enough to include the birth of the cell
    %'Pos03e2-mini-01','2006-08-17','e.coli','rootDir','F:\CELLOBSERVER\2006mondate\',[2 3];...
    %'Pos05-mini-01','2006-08-17','e.coli','rootDir','F:\CELLOBSERVER\2006mondate\',[3 2];...
    %'Pos05e1b-mini-01','2006-08-17','e.coli','rootDir','F:\CELLOBSERVER\2006mondate\',[2 1];...
    %above: not a very good regression, better the other version
    %'Pos06-mini-01','2006-08-17','e.coli','rootDir','F:\CELLOBSERVER\2006mondate\',[5 4];...
    %'Pos03e2-mini-01','2006-08-22','e.coli','rootDir','F:\CELLOBSERVER\2006mondate\',[4 5];...
    %above: length at div is not accurate
    %'Pos03-mini-01','2006-08-22','e.coli','rootDir','F:\CELLOBSERVER\2006mondate\',[2 3];...
    %above: schnitz is not corrected yet
    %'Pos05-mini-01','2006-08-22','e.coli','rootDir','F:\CELLOBSERVER\2006mondate\',[2 3];...
    %'Pos01-mini-01','2006-08-15','e.coli','rootDir','D:\CellObserver',[4 3];...
    %'Pos05-mini-01','2006-08-15','e.coli','rootDir','D:\CellObserver',[3 2];...
    %above: schnitz is not corrected yet
    }
PlotStyles={'r-';'b-';'g-';'k-';'m-';'c-'};
NrSchnitz=1;
SchI=0;
for i=1:length(Fdata(:,1))
    SchI = SchI + 1;
    p = feval('initschnitz',char(Fdata(i,1)),char(Fdata(i,2)),char(Fdata(i,3)),char(Fdata(i,4)),char(Fdata(i,5)));    
    [p,schnitzcells] = feval('compileschnitz',p,'load',1);
    
    Tsw=342.0333
    %swcolumn = 0
    %while isinteger(swcolumn)== 0
         %numschnitz=1:length(schnitzcells)
         for numschnitz=1,Fdata{i,6}(2)
             numschnitz
             schnitzcells(numschnitz).FYsmins
             swcolumn=find(abs(schnitzcells(numschnitz).FYsmins - Tsw)<.1)
           
        end
    %end
    
    
%     [Ti Fl Tbr Tsw Tdv]= feval('plotschnitzmeST_NoAnc',p,schnitzcells,'FYsmins','MYs',Fdata{i,6},PlotStyles);
%     %Ti is all x data (xout)
%     %Fl is all y data (yout)
%     %Tbr is Xbr
%     %Tsw is Xsw
%     %Tdv is Xdv
%     %AllData{SchI,1}=Fdata(1,:);
%     AllData{SchI,1}=Fdata(i,:)
%     AllData{SchI,2}=Ti;
%     AllData{SchI,3}=Fl;
%     AllData{SchI,4}=Tbr;
%     AllData{SchI,5}=Tsw;
%     AllData{SchI,6}=Tdv;
%     AllData{SchI,7}=schnitzcells(1,Fdata{i,6}(length(Fdata{i,6}))).lengthMicrons; %length data for the switching schinitz only.
%     Lbr=AllData{SchI,7}(1);
%     Lsw=interp1(AllData{SchI,2}{1,length(AllData{SchI,2})},AllData{SchI,7},Tsw,'linear');
%         %above : interpolation of cell length at the coresponding time switch.
%     Ldv=AllData{SchI,7}(length(AllData{SchI,7}));
%     AllData{SchI,8}=Lbr;
%     AllData{SchI,9}=Lsw;
%     AllData{SchI,10}=Ldv;
    
end
